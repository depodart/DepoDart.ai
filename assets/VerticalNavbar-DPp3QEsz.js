import{r as n,M as z,j as s,c as I,P as A,e as H,f as V,g as D,h as C,m as w}from"./index-Dt-lgo9U.js";import{c as B,m as Y}from"./close-Ck3EYUNQ.js";import{n as R}from"./index-DFLWir3U.js";class W extends n.Component{getSnapshotBeforeUpdate(d){const t=this.props.childRef.current;if(t&&d.isPresent&&!this.props.isPresent){const a=t.offsetParent,m=a instanceof HTMLElement&&a.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=m-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function F({children:o,isPresent:d,anchorX:t}){const a=n.useId(),m=n.useRef(null),l=n.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=n.useContext(z);return n.useInsertionEffect(()=>{const{width:g,height:c,top:x,left:r,right:e}=l.current;if(d||!m.current||!g||!c)return;const i=t==="left"?`left: ${r}`:`right: ${e}`;m.current.dataset.motionPopId=a;const f=document.createElement("style");return p&&(f.nonce=p),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${c}px !important;
            ${i}px !important;
            top: ${x}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[d]),s.jsx(W,{isPresent:d,childRef:m,sizeRef:l,children:n.cloneElement(o,{ref:m})})}const K=({children:o,initial:d,isPresent:t,onExitComplete:a,custom:m,presenceAffectsLayout:l,mode:p,anchorX:g})=>{const c=I(U),x=n.useId(),r=n.useCallback(i=>{c.set(i,!0);for(const f of c.values())if(!f)return;a&&a()},[c,a]),e=n.useMemo(()=>({id:x,initial:d,isPresent:t,custom:m,onExitComplete:r,register:i=>(c.set(i,!1),()=>c.delete(i))}),l?[Math.random(),r]:[t,r]);return n.useMemo(()=>{c.forEach((i,f)=>c.set(f,!1))},[t]),n.useEffect(()=>{!t&&!c.size&&a&&a()},[t]),p==="popLayout"&&(o=s.jsx(F,{isPresent:t,anchorX:g,children:o})),s.jsx(A.Provider,{value:e,children:o})};function U(){return new Map}const j=o=>o.key||"";function $(o){const d=[];return n.Children.forEach(o,t=>{n.isValidElement(t)&&d.push(t)}),d}const G=({children:o,custom:d,initial:t=!0,onExitComplete:a,presenceAffectsLayout:m=!0,mode:l="sync",propagate:p=!1,anchorX:g="left"})=>{const[c,x]=H(p),r=n.useMemo(()=>$(o),[o]),e=p&&!c?[]:r.map(j),i=n.useRef(!0),f=n.useRef(r),u=I(()=>new Map),[S,T]=n.useState(r),[y,M]=n.useState(r);V(()=>{i.current=!1,f.current=r;for(let v=0;v<y.length;v++){const h=j(y[v]);e.includes(h)?u.delete(h):u.get(h)!==!0&&u.set(h,!1)}},[y,e.length,e.join("-")]);const E=[];if(r!==S){let v=[...r];for(let h=0;h<y.length;h++){const b=y[h],P=j(b);e.includes(P)||(v.splice(h,0,b),E.push(b))}return l==="wait"&&E.length&&(v=E),M($(v)),T(r),null}const{forceRender:N}=n.useContext(D);return s.jsx(s.Fragment,{children:y.map(v=>{const h=j(v),b=p&&!c?!1:r===y||e.includes(h),P=()=>{if(u.has(h))u.set(h,!0);else return;let k=!0;u.forEach(L=>{L||(k=!1)}),k&&(N==null||N(),M(f.current),p&&(x==null||x()),a&&a())};return s.jsx(K,{isPresent:b,initial:!i.current||t?void 0:!1,custom:d,presenceAffectsLayout:m,mode:l,onExitComplete:b?void 0:P,anchorX:g,children:v},h)})})},q=()=>{var g,c,x,r;const[o,d]=n.useState(""),[t,a]=n.useState(!1),m=e=>{const i=document.getElementById(e);i&&i.scrollIntoView({behavior:"smooth",block:"start"})};n.useEffect(()=>{const e=()=>{const i=R.SPA.map(u=>document.getElementById(u.id)),f=window.scrollY+window.innerHeight/2;i.forEach(u=>{u&&u.offsetTop<=f&&u.offsetTop+u.offsetHeight>f&&d(u.getAttribute("id"))})};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const l={hover:{scale:1.05},tap:{scale:.95}},p={initial:{scaleY:0},animate:{scaleY:1},exit:{scaleY:0}};return s.jsxs(s.Fragment,{children:[s.jsx("nav",{className:`${C.floatingNav} hidden sm:block`,children:s.jsx("div",{className:C.verticalContainer,children:s.jsx(w.ul,{className:C.verticalNav,initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},children:(c=(g=R)==null?void 0:g.SPA)==null?void 0:c.map(e=>s.jsx(w.li,{className:`relative ${C.verticalLink}`,variants:l,whileHover:"hover",whileTap:"tap",children:s.jsxs("a",{href:`#${e.id}`,onClick:i=>{i.preventDefault(),d(e.title),m(e.id)},className:"block w-full h-full p-2",children:[s.jsx("span",{className:"relative z-10 inline-block origin-left",children:e.title}),o===e.id&&s.jsx(w.span,{layoutId:"activeTab",className:"absolute inset-0 bg-background-primary-dark rounded-lg",initial:"initial",animate:"animate",exit:"exit",variants:p,transition:{type:"spring",stiffness:300,damping:20}})]})},e.id))})})}),s.jsxs("div",{className:C.mobileMenuContainer,children:[s.jsx(w.img,{src:t?B:Y,alt:"menu",className:C.menuIcon,onClick:()=>a(!t),whileHover:{scale:1.1},whileTap:{scale:.9}}),s.jsx(G,{children:t&&s.jsx(w.div,{className:C.mobileMenuDropdown,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:(r=(x=R)==null?void 0:x.SPA)==null?void 0:r.map(e=>s.jsxs(w.a,{href:`#${e.id}`,className:`relative text-sm p-2 rounded-md block ${o===e.id?"text-secondary-dark dark:text-secondary-light":"text-gray-600 dark:text-gray-300"}`,onClick:i=>{i.preventDefault(),d(e.id),a(!1),m(e.id)},whileHover:{scale:1.05},children:[o===e.id&&s.jsx(w.span,{className:"absolute inset-0 bg-background-primary-dark rounded-md",layoutId:"mobileActiveTab",transition:{type:"spring",stiffness:300}}),s.jsx("span",{className:"relative z-10",children:e.title})]},e.id))})})]})]})};export{q as default};
