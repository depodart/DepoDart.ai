import{r as a,j as m}from"./index-35409859.js";import{C as D,P as I}from"./Preload-bab84921.js";import{c as U,j as W,_ as y,k as $,e as S,l as h,m as V,V as N}from"./events-776716bd.esm-38f93afd.js";function g(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function E(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,n)}return e}function j(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?E(Object(e),!0).forEach(function(n){g(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):E(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}new U;new U;function z(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var l=function t(r,e,n){var s=this;z(this,t),g(this,"dot2",function(o,i){return s.x*o+s.y*i}),g(this,"dot3",function(o,i,c){return s.x*o+s.y*i+s.z*c}),this.x=r,this.y=e,this.z=n},k=[new l(1,1,0),new l(-1,1,0),new l(1,-1,0),new l(-1,-1,0),new l(1,0,1),new l(-1,0,1),new l(1,0,-1),new l(-1,0,-1),new l(0,1,1),new l(0,-1,1),new l(0,1,-1),new l(0,-1,-1)],O=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],A=new Array(512),M=new Array(512),q=function(r){r>0&&r<1&&(r*=65536),r=Math.floor(r),r<256&&(r|=r<<8);for(var e=0;e<256;e++){var n;e&1?n=O[e]^r&255:n=O[e]^r>>8&255,A[e]=A[e+256]=n,M[e]=M[e+256]=k[n%12]}};q(0);function B(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var r=t;t=0;for(var e=0;e<r.length;e++)t=(t+(e+1)*(r.charCodeAt(e)%96))%2147483647}return t===0&&(t=311),t}function R(t){var r=B(t);return function(){var e=r*48271%2147483647;return r=e,e/2147483647}}var H=function t(r){var e=this;z(this,t),g(this,"seed",0),g(this,"init",function(n){e.seed=n,e.value=R(n)}),g(this,"value",R(this.seed)),this.init(r)},L=new H(Math.random()),T={radius:1,center:[0,0,0]};function K(t,r){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:L,n=j(j({},T),r),s=n.radius,o=n.center,i=0;i<t.length;i+=3){var c=Math.pow(e.value(),.3333333333333333),u=e.value()*2-1,f=e.value()*2-1,p=e.value()*2-1,v=Math.sqrt(u*u+f*f+p*p);u=c*u/v,f=c*f/v,p=c*p/v,t[i]=u*s+o[0],t[i+1]=f*s+o[1],t[i+2]=p*s+o[2]}return t}const J=()=>parseInt(W.replace(/\D+/g,"")),F=J(),x=F>=154?"opaque_fragment":"output_fragment";class Q extends ${constructor(r){super(r),this.onBeforeCompile=(e,n)=>{const{isWebGL2:s}=n.capabilities;e.fragmentShader=e.fragmentShader.replace(`#include <${x}>`,`
        ${s?`#include <${x}>`:`#extension GL_OES_standard_derivatives : enable
#include <${x}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${F>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const X=a.forwardRef((t,r)=>{const[e]=a.useState(()=>new Q(null));return a.createElement("primitive",y({},t,{object:e,ref:r,attach:"material"}))});let d,b;const Y=a.createContext(null),C=new V,_=new N,Z=a.forwardRef(({children:t,range:r,limit:e=1e3,...n},s)=>{const o=a.useRef(null);a.useImperativeHandle(s,()=>o.current,[]);const[i,c]=a.useState([]),[[u,f,p]]=a.useState(()=>[new Float32Array(e*3),Float32Array.from({length:e*3},()=>1),Float32Array.from({length:e},()=>1)]);a.useEffect(()=>{o.current.geometry.attributes.position.needsUpdate=!0}),S(()=>{for(o.current.updateMatrix(),o.current.updateMatrixWorld(),C.copy(o.current.matrixWorld).invert(),o.current.geometry.drawRange.count=Math.min(e,r!==void 0?r:e,i.length),d=0;d<i.length;d++)b=i[d].current,b.getWorldPosition(_).applyMatrix4(C),_.toArray(u,d*3),o.current.geometry.attributes.position.needsUpdate=!0,b.matrixWorldNeedsUpdate=!0,b.color.toArray(f,d*3),o.current.geometry.attributes.color.needsUpdate=!0,p.set([b.size],d),o.current.geometry.attributes.size.needsUpdate=!0});const v=a.useMemo(()=>({getParent:()=>o,subscribe:P=>(c(w=>[...w,P]),()=>c(w=>w.filter(G=>G.current!==P.current)))}),[]);return a.createElement("points",y({userData:{instances:i},matrixAutoUpdate:!1,ref:o,raycast:()=>null},n),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",count:u.length/3,array:u,itemSize:3,usage:h}),a.createElement("bufferAttribute",{attach:"attributes-color",count:f.length/3,array:f,itemSize:3,usage:h}),a.createElement("bufferAttribute",{attach:"attributes-size",count:p.length,array:p,itemSize:1,usage:h})),a.createElement(Y.Provider,{value:v},t))}),ee=a.forwardRef(({children:t,positions:r,colors:e,sizes:n,stride:s=3,...o},i)=>{const c=a.useRef(null);return a.useImperativeHandle(i,()=>c.current,[]),S(()=>{const u=c.current.geometry.attributes;u.position.needsUpdate=!0,e&&(u.color.needsUpdate=!0),n&&(u.size.needsUpdate=!0)}),a.createElement("points",y({ref:c},o),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",count:r.length/s,array:r,itemSize:s,usage:h}),e&&a.createElement("bufferAttribute",{attach:"attributes-color",count:e.length/s,array:e,itemSize:3,usage:h}),n&&a.createElement("bufferAttribute",{attach:"attributes-size",count:n.length/s,array:n,itemSize:1,usage:h})),t)}),te=a.forwardRef((t,r)=>t.positions instanceof Float32Array?a.createElement(ee,y({},t,{ref:r})):a.createElement(Z,y({},t,{ref:r}))),re=1500,ne=()=>{const t=a.useRef(),r=a.useMemo(()=>K(new Float32Array(re*3),{radius:1.2}),[]);return S((e,n)=>{t.current&&(t.current.rotation.x-=n/10,t.current.rotation.y-=n/15)}),m.jsx("group",{ref:t,rotation:[0,0,Math.PI/4],children:m.jsx(te,{positions:r,stride:3,frustumCulled:!0,children:m.jsx(X,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},ie=()=>m.jsx("div",{className:"stars-canvas-container",children:m.jsxs(D,{camera:{position:[0,0,1]},dpr:[1,1.5],gl:{antialias:!1},children:[m.jsx(a.Suspense,{fallback:null,children:m.jsx(ne,{})}),m.jsx(I,{all:!0})]})});export{ie as default};
